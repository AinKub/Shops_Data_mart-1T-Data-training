# Shops_Data_mart-1T-Data-training

## Первое задание
В качестве первого задания необходимо было доработать исходную схему данных\
![Original data schema](img/original_data_schema.png)

По итогу, в схему была добавлена таблица shops, содержащая в себе id магазина, а также его имя.
Также было внесено изменение в таблицу plan — вместо shop_name теперь используется shop_id, что связывает таблицы shops и plan\
![Final data schema](img/final_data_schema.png)

## Второе задание
Был подготовлен DDL [скрипт](init_script.sql) для создания таблиц и заполнения их данными

Затем был написан [скрипт](data_mart_build_script.sql) для сборки витрины данных, включающей в себя:
- shop_name — название магазина,
- product_name — название товара,
- sales_fact — количество фактических продаж на конец месяца,
- sales_plan — количество запланированных продаж на конец месяца,
- sales_ratio — отношение количества фактических продаж sales_fact к запланированному sales_plan,
- income_fact — фактический доход,
- income_plan — планируемый доход,
- income_ratio — отношение фактического дохода income_fact к запланированному income_plan.

Также в строках 2 и 21 можно выставить даты начала и конца месяца, за которые нужно получить витрину